docker的产生

- 镜像技术，打破代码及应用的观念，传统上开发给运维的是一套代码或者war包，但是没有配置文件以及运行环境等，导致运行结果不一致，以前叫交镜像，现在叫交代码

- docker从系统环境开始，自底而上打包应用
  -  运行文档
  - 配置环境
  - 运行环境
  - 运行依赖包
  - 操作系统发行版
  - 内核

- 可以解决多台服务器部署的问题
- 自底而上打包达到应用程序跨平台的无缝衔接

## docker的理念

- 一次构建，处处运行

![image-20210605003830476](../学习笔记/images/image-20210605003830476.png)

## docker的应用

- 和虚拟机的区别

  - 虚拟机是带环境安装的一种解决方案，可以在一种操作系统中运行另一种操作系统，并且模拟计算机硬件资源，运行在其中的应用程序对此毫无感知，对于底层系统来说，虚拟机就像是一个文件，不需要删掉即可
  - 虚拟机占用资源多、冗余步骤多、启动慢
  - Linux发展出一种虚拟化技术：Linux container，LXC。不是模拟一个完整的操作系统，而是对进程进行了隔离，只需要软件工作所需的库资源和设置，系统变得轻量，保证部署在任何环境中的软件中的软件都能如一地运行。
  - 传统虚拟机技术是虚拟出一整套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程
  - 容器内地应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件模拟，容器比传统虚拟机更为轻便
  - 每个容器之间相互隔离，每个容器有自己的文件系统，容器之间进程不会相互影响，能区分计算资源
  - 虚拟机分钟级，docker秒级，小型的Linux系统
- 开发/运维（DevOps）
  - 开发即运维
- 新浪微博
  - 弹性云扩容
  - 瞬间流量暴增
- 美团云Docker框架
  - 更轻量：基于容器的虚拟化，仅包含业务运行所需的runtime环境，centos/ubuntu仅170M，宿主机可部署100~1000个容器
  - 更高效：五操作系统虚拟化开销
  - 更敏捷、更灵活
    - 分层的存储和包管理，devops理念
    - 支持多种网络配置

## docker的特征

![image-20210619130518538](../学习笔记/images/image-20210619130518538.png)

- 仓库（repository）：

  - 集中存放镜像文件的地方
  - repository（仓库）和registry（仓库注册服务器）是有区别的，仓库注册服务器上存放多个仓库，每个仓库又包含多个镜像，每个镜像有不同的标签（tag，类似于版本号）
  - 分为公开仓库（public）和私有仓库（private） docker hub 、阿里云、网易云

- 镜像（image）：

  - 是一个只读的模板，可以用来创建docker容器，一个镜像可以创建很多容器

- 容器（container）：

  - 用镜像创建的运行实例，利用容器（container）独立运行的一个或一组应用，可以自由运行，容器之间相互隔离，保证安全
  - 可以被看成是简易的linux环境（root用户权限、进程空间、用户空间和网络空间，只用内核）和运行在其中的应用程序
  - 定义和镜像几乎一模一样，是一堆层的统一视角，但容器的最上面一层是可读可写的

  